---
layout: post
title:  "什么是binlog"
date:   2018-12-06 18:53:58
categories: RDBMS
tags: MySQL
author: miaoqi
---

* content
{:toc}
## 简介

### 定义

* binlog是记录所有数据库表结构变更（例如CREATE、ALTER TABLE…）以及表数据修改（INSERT、UPDATE、DELETE…）的二进制日志

* binlog不会记录SELECT和SHOW这类操作，因为这类操作对数据本身并没有修改，但你可以通过查询通用日志来查看MySQL执行过的所有语句。

	**多说一句，如果update操作没有造成数据变化，也是会记入binlog。**

### 误解

* binlog只是一类记录操作内容的日志文件

	因为binlog称之为二进制日志，很多研发会把这个二进制日志和我们平时在代码里写的代码日志联系在一起。因为我们的代码日志，只有一类记录操作容的文件，并不包含索引文件。然而，这个二进制日志包括两类文件：

	* 索引文件（文件名后缀为.index）用于记录哪些日志文件正在被使用
	* 日志文件（文件名后缀为.00000*）记录数据库所有的DDL和DML(除了数据查询语句)语句事件

	假设文件my.cnf中有这么三条配置

	```
	log_bin：on 打开binlog日志
	
	log_bin_basename：bin文件路径及名前缀（/var/log/mysql/mysql-bin）
	
	log_bin_index：bin文件index（/var/log/mysql/mysql-bin.index）
	```
