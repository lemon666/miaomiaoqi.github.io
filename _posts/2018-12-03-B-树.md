---
layout: post
title:  "B-树"
date:   2018-12-03 14:32:39
categories: Structure
tags: Tree
author: miaoqi
---

* content
{:toc} 

## 简介

* B-树就是B树, 中间的横线并不是减号

* 因为树的查询效率高, 而且可以保持有序, 所以数据库索引使用树的结构存储

    * 在树中, 从算法逻辑角度上来讲, 二叉查找树的查找速度和比较次数都是最小的, 但是我们不得不考虑一个现实的问题就是磁盘IO, 数据库的索引是存储在磁盘上的, 当数据量大的时候, 索引的大小可能有几个G甚至更多

    * 当我们利用索引查询的时候, 显然不能把整个索引全部加载到内存, 能做的只有逐一加载每一个磁盘页, 这里的磁盘页对应着索引树的节点

        ![http://www.miaomiaoqi.cn/images/structure/tree/b-_1.png](http://www.miaomiaoqi.cn/images/structure/tree/b-_1.png)

        假如我们利用二叉树作为索引结构, 假设树的高度是4, 查找的值是10, 那么流程如下

        ![http://www.miaomiaoqi.cn/images/structure/tree/b-_2.png](http://www.miaomiaoqi.cn/images/structure/tree/b-_2.png)

        ![http://www.miaomiaoqi.cn/images/structure/tree/b-_3.png](http://www.miaomiaoqi.cn/images/structure/tree/b-_3.png)

        ![http://www.miaomiaoqi.cn/images/structure/tree/b-_4.png](http://www.miaomiaoqi.cn/images/structure/tree/b-_4.png)

        ![http://www.miaomiaoqi.cn/images/structure/tree/b-_5.png](http://www.miaomiaoqi.cn/images/structure/tree/b-_5.png)

        ![http://www.miaomiaoqi.cn/images/structure/tree/b-_6.png](http://www.miaomiaoqi.cn/images/structure/tree/b-_6.png)

        磁盘IO的次数由树的高度决定, 所以最坏的情况下, 磁盘IO的次数等于树的高度, 既然如此我们就需要把原本"瘦高"的树结构变为"矮胖"的树结构, 这就是B-树的特征之一

* B树是一种多路平衡查找树, 它的每一个节点最多包含k个孩子, k被称为B树的阶, k的大小取决于磁盘页的大小

## 特征

* 下面具体介绍一下B-树(Balance Tree), 一个m阶的B树具有如下几个特征

    * 根结点至少有两个子女

    * 每个中间节点都包含k-1个元素和k个孩子，其中 m/2 <= k <= m

    * 每一个叶子节点都包含k-1个元素，其中 m/2 <= k <= m

    * 所有的叶子结点都位于同一层。

    * 每个节点中的元素从小到大排列，节点当中k-1个元素正好是k个孩子包含的元素的值域分划



    
    

