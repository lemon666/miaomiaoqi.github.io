---
layout: post
title:  "软件设计模式六大原则"
date:   2017-07-26 10:14:05
categories: software engineering
tags: Design principle
author: miaoqi
---

## 单一职责原则(SRP)

    
    1. 定义:
        There should never be more than one reason for a class to change，应该有且仅有一个原因引起类的变更。
    
    2. 职责:
        业务逻辑，或者对象能够承担的责任，并以某种行为方式来执行。
    
    3. 问题由来:
        类Ｔ负责两个不事的职责：职责Ｐ１、职责Ｐ２。当由于职责Ｐ１需求发生改变而需要修改类Ｔ时，有可能会导致原来运行的职责Ｐ２功能发生故障。解决方法：分别建立两个类完成对应的功能

    4.好处:
        类的复杂性降低，实现什么职责都有清晰明确的定义;
        可读性提高，复杂性降低，那当然可读性提高了;
        可维护性提高，那当然了，可读性提高，那当然更容易维护了;
        变更引起的风险降低，变更是必不可少的，接口的单一职责做的好的话，一个接口修改只对相应的实现类有影响，与其他的接口无影响，这个是对项目有非常大的帮助。

    5.难点
        职责划分无量化标准：学究理论还是工程应用？后者时，要考虑可变因素与不可变因素，以及相关的收益成本比率等。
        单一职责妥协：项目中单一职责原则很少得以体现，或者非常难（囿于国内技术人员的地位、话语权、项目中的环境、工作量、人员的技术水平、硬件资源等，最终的结果就是常常违背单一职责原则）。

    6.实践建议
        接口一定要做到ＳＲＰ，类的设计尽量做到只有一个原因引起变化。
        妥协原则：
            Ａ.只有逻辑足够简单，才可以在代码级别上违背ＳＲＰ;
            Ｂ.只有类中方法数量足够少，才可以在方法级别上违背ＳＲＰ;
            Ｃ.实际应用中的类都要复杂的多，一旦发生职责扩散而需要修改类时，除非这个类本身非常简单，否则还是要遵循ＳＲＰ。

## 里氏替代原则(LSP)

    1. 定义: Functions that use pointers or referrnces to base classes must be able to use objects of derived classes without knowing it.(所有引用基类的地方必须能透明地使用其子类的对象。)

    2. 理解: 只要父类能出现的地方，子类就可以出现，并且替换为子类也不会产生任何错误或异常，使用者可能根本就不需要知道是父类还是子类。但反之，未要求。

        继承机制的优点：
            代码共享，减少创建类的工作量；
            提高代码的重用性；
            子类可以形似父类，又异于父类；
            提高父类的扩展性，实现父类的方法即可随意而为；
            
        继承机制的缺点：
            继承是入侵性的（只要继承，就必须拥有父类的所有属性与方法）；
            降低了代码的灵活性（子类拥有了父类的属性方法，会增多约束）；
            增强了耦合性（当父类的常量、变量、方法被修改时，必需要考虑子类的修改）。      
            
        定义所包含的四层意思：（另一种通俗的LSP原则讲解：子类可以扩展父类的功能，但不能改变父类原有的功能）
            子类可以实现父的抽象方法，但不能覆盖父类的非抽象方法（做系统设计时，经常会定义一个接口或抽象类，然后编码实现（定义的方法或接口），调用类则直接传入接口或抽象类，这里也是LSP的应用体现）；
            子类可以有自己的方法和属性（因为LSP可以正用，不能反用：在子类出现的地方，父类未必就可以胜任（本来就无此要求）。即不要死扣——所有的地方（如参数）都要以父类的形式出现（再作转化），实现中有需要依赖子类的情况，这是正常的）；
            覆盖或实现父类的方法时输入参数可以被放大（放大的实质为重载，因为参数不同；为什么只能放大？因为父类方法的参数类型相对较小，所以当传入父类方法的参数类型（或更窄类型）时，重载时，将优先匹配父类的方法，因此子类重载的方法并不会对此参数类型被执行，因此保证了LSP，且不会引起想不到的业务逻辑混乱。若为覆写，则程序员必清楚其逻辑要义）；
            覆写或实现父类的方法时输出结果可以被缩小（若放大，还能用子类替换父类吗？）。

## 参考

  * [设计模式六大原则之--单一职责原则（SRP）][1]
  * [设计模式六大原则之--里氏替代原则（LSP）][2]
    
[1]:  http://blog.csdn.net/benbenxiongyuan/article/details/23940989 
[2]:  http://blog.csdn.net/benbenxiongyuan/article/details/23999989
        
        
        
        
        
        
        
        