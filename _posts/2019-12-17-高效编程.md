---
layout: post
title:  "高效编程"
date:   2019-12-17 17:38:04
categories: Java
tags: Grammar
author: miaoqi
---

* content
{:toc}
## 函数式编程

## 流式编程

## 资源关闭

## 工具集

## 线程池

## 实用工具

## 验证框架

## 开发工具

## 自测工具

## 检查工具

## Java 总结

### 类加载过程(以 Person 类为例 Person p = new Person())

1. 静态方法区为 Person 类开辟一个空间
2. Person 的静态成员变量加载进该空间
3. Person 类的静态成员变量默认初始化
4. Person 类的静态成员变量显示初始化
5. Person 类的静态方法加载进该空间
6. 非静态方法区为 Person 类开辟一个空间
7. Person 类的非静态方法(构造方法, 普通方法) 加载进该空间
8. 栈内存中声明变量`p`
9. 堆内存中为 new Person() 开辟一个空间
10. 非静态成员变量默认初始化
11. 调用 Person() 的构造方法
12. 默认调用父类的构造方法
13. 非静态成员变量显示初始化
14. 执行非静态构造代码块
15. 构造函数继续向下执行
16. 将栈内存中的变量`p`指向堆内存中的`new Person()`

### 常用 List 集合初始化方式

1. **先创建 List 在赋值**

    标准方式, 先创建集合对象, 然后逐个调用`add`方法初始化. 用起来比较繁琐, 不太方便

    ```java
    List<Integer> list = new ArrayList<>();
    list.add(1);
    list.add(2);
    list.add(3);
    ```

2. **使用`{{}}`双大括号初始化**

    使用匿名内部类完成初始化. 外层的`{}`定义了一个ArrayList的匿名内部类, 内层的`{}`定义了一个实例初始化的非静态构造代码块. **有内存泄露风险**

    ```java
    List<Integer> list = new ArrayList(){
    	{
    		add(1);
    		add(2);
    		add(3);
    	}
    }
    ```

3. **使用Arrays.asList**

    使用 Arrays 的静态方法 `asList` 初始化. **返回的 list 集合是不可变的**

    ```java
    List<Integer> list = Arrays.asList(1, 2, 3);
    ```

4. **使用 Stream (JDK8 以上)**

    使用 JDK8 引入的 Stream 的 of 方法生成一个 stream 对象, 调用 `collect` 方法进行收集, 形成一个 List 集合

    ```java
    List<Integer> list = Stream.of(1, 2, 3).collect(Collectors.toList());
    ```

5. **使用Google Guava(需要引入 Guava 工具包)**

    借助 Google Guava 工具集中的 `Lists` 工具类初始化. 需要引入 Guava 才能使用

    ```java
    List<Integer> list = Lists.newArrayList(1, 2, 3);
    ```

6. **使用Lists(JDK9 以上)**

    使用 JDK9 引入的 `Lists` 完成初始化

    ```java
    List<Integer> list = Lists.of(1, 2, 3);
    ```

    