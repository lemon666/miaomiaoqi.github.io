---
layout: post
title:  "Python系统编程"
date:   2017-10-10 11:40:00
categories: Language
tags: Python
author: miaoqi
---

* content
{:toc}

## 进程

### 多任务

什么叫“多任务”呢？简单地说，就是操作系统可以同时运行多个任务。打个比方，你一边在用浏览器上网，一边在听MP3，一边在用Word赶作业，这就是多任务，至少同时有3个任务正在运行。还有很多任务悄悄地在后台同时运行着，只是桌面上没有显示而已。

现在，多核CPU已经非常普及了，但是，即使过去的单核CPU，也可以执行多任务。由于CPU执行代码都是顺序执行的，那么，单核CPU是怎么执行多任务的呢？

答案就是操作系统轮流让各个任务交替执行，任务1执行0.01秒，切换到任务2，任务2执行0.01秒，再切换到任务3，执行0.01秒……这样反复执行下去。表面上看，每个任务都是交替执行的，但是，由于CPU的执行速度实在是太快了，我们感觉就像所有任务都在同时执行一样。

真正的并行执行多任务只能在多核CPU上实现，但是，由于任务数量远远多于CPU的核心数量，所以，操作系统也会自动把很多任务轮流调度到每个核心上执行。

### 进程的创建-fork

* 进程 VS 程序

    编写完毕的代码，在没有运行的时候，称之为程序

    正在运行着的代码，就成为进程
    
    进程，除了包含代码以外，还有需要运行的环境等，所以和程序是有区别的

* fork()

    Python的os模块封装了常见的系统调用，其中就包括fork，可以在Python程序中轻松创建子进程：

        import os

        # 注意，fork函数，只在Unix/Linux/Mac上运行，windows不可以
        pid = os.fork()
    
        if pid == 0:
            print('哈哈1')
        else:
            print('哈哈2')	

    说明：

    程序执行到os.fork()时，操作系统会创建一个新的进程（子进程），然后复制父进程的所有信息到子进程中      
    然后父进程和子进程都会从fork()函数中得到一个返回值，在子进程中这个值一定是0，而父进程中是子进程的 id号        
    在Unix/Linux操作系统中，提供了一个fork()系统函数，它非常特殊。
    
    普通的函数调用，调用一次，返回一次，但是fork()调用一次，返回两次，因为操作系统自动把当前进程（称为父进程）复制了一份（称为子进程），然后，分别在父进程和子进程内返回。
    
    子进程永远返回0，而父进程返回子进程的ID。
    
    这样做的理由是，一个父进程可以fork出很多子进程，所以，父进程要记下每个子进程的ID，而子进程只需要调用getppid()就可以拿到父进程的ID。
            
* getpid()、getppid()


## 线程
		
		
		
		
		
		
	
		
		
		
 		
		
	
	
	

	
	
	
	
	
	
	
	
	
	
		
		
		
		
	
	
		
		








































