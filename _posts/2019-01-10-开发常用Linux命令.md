---
layout: post
title:  "开发常用Linux命令"
date:   2019-01-10 10:07:12
categories: OperatingSystem
tags: Linux
author: miaoqi
---

* content
{:toc}
# wc

## 功能

利用wc指令我们可以计算文件的Byte数、字数、或是列数，若不指定文件名称、或是所给予的文件名为"-"，则wc指令会从标准输入设备读取数据。

## 格式

```
wc [-clw][--help][--version][文件...]
```

## 参数

首先构建一个文件testfile.txt, 内容容下

```
abc abc
def
gggg
```

不加参数, 输出内容为指定文件的**行数**、**单词数**，以及**字节数**(包含换行, 结束符)

```
wc testfile.txt
3       4      17 testfile.txt
```

-c或--bytes或--chars 只显示Bytes数

```
wc -c testfile.txt
17 testfile.txt
```

-l或--lines 只显示行数

```
wc -l testfile.txt
3 testfile.txt
```

-w或--words 只显示字数

```
wc -w testfile.txt
4 testfile.txt
```

--help 在线帮助

--version 显示版本信息

# curl(CommandLine Uniform Resource Locator)

## 功能

curl，全称CommandLine URL 或 CommandLine Uniform Resource Locator，顾名思义curl命令是在命令行方式下工作，利用URL的语法进行数据的传输或者文件的传输。

从官网我们可以知道，该工具支持以下30多种类型的传输方式，这当中包含多种协议。

`DICT, FILE, FTP, FTPS, Gopher, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, Telnet and TFTP. curl supports SSL certificates, HTTP POST, HTTP PUT, FTP uploading, HTTP form based upload, proxies, HTTP/2, cookies, user+password authentication (Basic, Plain, Digest, CRAM-MD5, NTLM, Negotiate and Kerberos), file transfer resume, proxy tunneling`

最常使用的有FILE、FTP、HTTP、HTTPS等协议。

对于程序员在说，在我们开发远程服务的时候，比如http传输，SOCKET等网络编程时，这个工具能非常方便的作为你的验证工具和测试工具。

## 格式

```
crul -[选项] [URL]
```

## 参数

**-v 选项，--verbose，指定该选项后，可以跟踪URL的连接信息。我们可以根据这个选项看看curl是怎么工作的。**

**加上选项后返回的信息，包括很多重要信息：**

- 域名解释过程：我们可以得到真正连接的IP地址和端口
- 请求头信息：其中有使用的协议（HTTP），协议的请求方式（GET）
- 回应头信息：包含状态码（200），内容格式（text/html），内容长度等

```
curl -v www.baidu.com

* Rebuilt URL to: www.baidu.com/
*   Trying 119.75.217.26...
* TCP_NODELAY set
* Connected to www.baidu.com (119.75.217.26) port 80 (#0)
> GET / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/7.54.0
> Accept: */*
>
< HTTP/1.1 200 OK
< Server: bfe/1.0.8.18
< Date: Mon, 21 Jan 2019 03:06:40 GMT
< Content-Type: text/html
< Content-Length: 2381
< Last-Modified: Mon, 23 Jan 2017 13:27:36 GMT
< Connection: Keep-Alive
< ETag: "588604c8-94d"
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Pragma: no-cache
< Set-Cookie: BDORZ=27315; max-age=86400; domain=.baidu.com; path=/
< Accept-Ranges: bytes
<
<!DOCTYPE html>
<!--STATUS OK--><html> <head><meta http-equiv=content-type content=text/html;charset=utf-8><meta http-equiv=X-UA-Compatible content=IE=Edge><meta content=always name=referrer><link rel=stylesheet type=text/css href=http://s1.bdstatic.com/r/www/cache/bdorz/baidu.min.css><title>百度一下，你就知道</title></head> <body link=#0000cc> <div id=wrapper> <div id=head> <div class=head_wrapper> <div class=s_form> <div class=s_form_wrapper> <div id=lg> <img hidefocus=true src=//www.baidu.com/img/bd_logo1.png width=270 height=129> </div> <form id=form name=f action=//www.baidu.com/s class=fm> <input type=hidden name=bdorz_come value=1> <input type=hidden name=ie value=utf-8> <input type=hidden name=f value=8> <input type=hidden name=rsv_bp value=1> <input type=hidden name=rsv_idx value=1> <input type=hidden name=tn value=baidu><span class="bg s_ipt_wr"><input id=kw name=wd class=s_ipt value maxlength=255 autocomplete=off autofocus></span><span class="bg s_btn_wr"><input type=submit id=su value=百度一下 class="bg s_btn"></span> </form> </div> </div> <div id=u1> <a href=http://news.baidu.com name=tj_trnews class=mnav>新闻</a> <a href=http://www.hao123.com name=tj_trhao123 class=mnav>hao123</a> <a href=http://map.baidu.com name=tj_trmap class=mnav>地图</a> <a href=http://v.baidu.com name=tj_trvideo class=mnav>视频</a> <a href=http://tieba.baidu.com name=tj_trtieba class=mnav>贴吧</a> <noscript> <a href=http://www.baidu.com/bdorz/login.gif?login&amp;tpl=mn&amp;u=http%3A%2F%2Fwww.baidu.com%2f%3fbdorz_come%3d1 name=tj_login class=lb>登录</a> </noscript> <script>document.write('<a href="http://www.baidu.com/bdorz/login.gif?login&tpl=mn&u='+ encodeURIComponent(window.location.href+ (window.location.search === "" ? "?" : "&")+ "bdorz_come=1")+ '" name="tj_login" class="lb">登录</a>');</script> <a href=//www.baidu.com/more/ name=tj_briicon class=bri style="display: block;">更多产品</a> </div> </div> </div> <div id=ftCon> <div id=ftConw> <p id=lh> <a href=http://home.baidu.com>关于百度</a> <a href=http://ir.baidu.com>About Baidu</a> </p> <p id=cp>&copy;2017&nbsp;Baidu&nbsp;<a href=http://www.baidu.com/duty/>使用百度前必读</a>&nbsp; <a href=http://jianyi.baidu.com/ class=cp-feedback>意见反馈</a>&nbsp;京ICP证030173号&nbsp; <img src=//www.baidu.com/img/gs.gif> </p> </div> </div> </div> </body> </html>
* Connection #0 to host www.baidu.com left intact
```

**-i 选项，--include，把回应的头信息包含在内，跟-v大同小异，是-v的子集。**

```
curl -i www.baidu.com

HTTP/1.1 200 OK
Server: bfe/1.0.8.18
Date: Mon, 21 Jan 2019 03:07:49 GMT
Content-Type: text/html
Content-Length: 2381
Last-Modified: Mon, 23 Jan 2017 13:27:36 GMT
Connection: Keep-Alive
ETag: "588604c8-94d"
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Pragma: no-cache
Set-Cookie: BDORZ=27315; max-age=86400; domain=.baidu.com; path=/
Accept-Ranges: bytes

<!DOCTYPE html>
<!--STATUS OK--><html> <head><meta http-equiv=content-type content=text/html;charset=utf-8><meta http-equiv=X-UA-Compatible content=IE=Edge><meta content=always name=referrer><link rel=stylesheet type=text/css href=http://s1.bdstatic.com/r/www/cache/bdorz/baidu.min.css><title>百度一下，你就知道</title></head> <body link=#0000cc> <div id=wrapper> <div id=head> <div class=head_wrapper> <div class=s_form> <div class=s_form_wrapper> <div id=lg> <img hidefocus=true src=//www.baidu.com/img/bd_logo1.png width=270 height=129> </div> <form id=form name=f action=//www.baidu.com/s class=fm> <input type=hidden name=bdorz_come value=1> <input type=hidden name=ie value=utf-8> <input type=hidden name=f value=8> <input type=hidden name=rsv_bp value=1> <input type=hidden name=rsv_idx value=1> <input type=hidden name=tn value=baidu><span class="bg s_ipt_wr"><input id=kw name=wd class=s_ipt value maxlength=255 autocomplete=off autofocus></span><span class="bg s_btn_wr"><input type=submit id=su value=百度一下 class="bg s_btn"></span> </form> </div> </div> <div id=u1> <a href=http://news.baidu.com name=tj_trnews class=mnav>新闻</a> <a href=http://www.hao123.com name=tj_trhao123 class=mnav>hao123</a> <a href=http://map.baidu.com name=tj_trmap class=mnav>地图</a> <a href=http://v.baidu.com name=tj_trvideo class=mnav>视频</a> <a href=http://tieba.baidu.com name=tj_trtieba class=mnav>贴吧</a> <noscript> <a href=http://www.baidu.com/bdorz/login.gif?login&amp;tpl=mn&amp;u=http%3A%2F%2Fwww.baidu.com%2f%3fbdorz_come%3d1 name=tj_login class=lb>登录</a> </noscript> <script>document.write('<a href="http://www.baidu.com/bdorz/login.gif?login&tpl=mn&u='+ encodeURIComponent(window.location.href+ (window.location.search === "" ? "?" : "&")+ "bdorz_come=1")+ '" name="tj_login" class="lb">登录</a>');</script> <a href=//www.baidu.com/more/ name=tj_briicon class=bri style="display: block;">更多产品</a> </div> </div> </div> <div id=ftCon> <div id=ftConw> <p id=lh> <a href=http://home.baidu.com>关于百度</a> <a href=http://ir.baidu.com>About Baidu</a> </p> <p id=cp>&copy;2017&nbsp;Baidu&nbsp;<a href=http://www.baidu.com/duty/>使用百度前必读</a>&nbsp; <a href=http://jianyi.baidu.com/ class=cp-feedback>意见反馈</a>&nbsp;京ICP证030173号&nbsp; <img src=//www.baidu.com/img/gs.gif> </p> </div> </div> </div> </body> </html>

```

**-I （大写i）选项，--head，只显示返回的头信息，与-v大同小异，是-v的子集**

```
HTTP/1.1 200 OK
Server: bfe/1.0.8.18
Date: Mon, 21 Jan 2019 03:08:19 GMT
Content-Type: text/html
Content-Length: 277
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Connection: Keep-Alive
ETag: "575e1f60-115"
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Pragma: no-cache
Accept-Ranges: bytes

```

**-u 选项，带用户验证的连接。可以访问或获取带用户验证的URL。**

```
curl -u username:password ftp://127.0.0.1/hello.txt
curl -u username ftp://127.0.0.1/hello.txt
curl -u username:password https://127.0.0.1/

```

**-d 选项，带请求参数的连接。比如下面的URL，user=xiaoruan&age=22就是所带的参数。crul可以带请求参数。**

```
curl -d 'user=xiaoruan&age=22' http://127.0.0.1/index.html

```

**-X 选项，指定请求方式，我们只能URL可以有多种请求方式，最常见的是GET和POST，但请求的方式，包括GET、PUT、POST、DELETE四种方式**

**这四种请求方式，对于在做RESTFUL接口开发和测试的人来说，非常方便。curl的用法如下：**

```
curl -X GET www.baidu.com
curl -X POST www.baidu.com
curl -X DELETE www.baidu.com
curl -X PUT www.baidu.com

```

**-H 选项, 可以设置请求头**

```
curl -H 'Service-Token:xxxxxx' http://127.0.0.1/

```

- 头名、冒号和头值之间不能有空格。 

- 自定义的http头，需要加在标准头后面。

- 对于”User-Agent”, “Cookie”, “Host”这类标准的HTTP头部字段，通常会有另外一种设置方法。curl命令提供了特定的选项来对这些头部字段进行设置： 

    -A (or –user-agent): 设置 “User-Agent” 字段.

    -b (or –cookie): 设置 “Cookie” 字段. 

    -e (or –referer): 设置 “Referer” 字段.

## 常见用法

curl -X POST -d '{"customerId": 1, "title": "new_order", "amount": 100, "ticketNum": 100}' -H 'Content-Type: application/json' http://localhost:9601/order/api/order

curl -X POST -d 'k1=v1&k2=v2' http://localhost:9601/order/api/order

# df

## 功能

Linux df命令用于显示目前在Linux系统上的文件系统的磁盘使用情况统计。

## 格式

```
df [选项]... [FILE]...

```

## 参数

-a, --all 包含所有的具有 0 Blocks 的文件系统

--block-size={SIZE} 使用 {SIZE} 大小的 Blocks

-h, --human-readable 使用人类可读的格式(预设值是不加这个选项的...)

-H, --si 很像 -h, 但是用 1000 为单位而不是用 1024

-i, --inodes 列出 inode 资讯，不列出已使用 block

-k, --kilobytes 就像是 --block-size=1024

-l, --local 限制列出的文件结构

文件-m, --megabytes 就像 --block-size=1048576

文件--no-sync 取得资讯前不 sync (预设值)

文件-P, --portability 使用 POSIX 输出格式

文件--sync 在取得资讯前 sync

文件-t, --type=TYPE 限制列出文件系统的 TYPE

文件-T, --print-type 显示文件系统的形式

文件-x, --exclude-type=TYPE 限制列出文件系统不要显示 TYPE

文件-v (忽略)

文件--help 显示这个帮手并且离开

文件--version 输出版本资讯并且离开

## 常见用法

df -h: 人类可读的方式展示

# free

## 功能

Linux free命令用于显示内存状态。

free指令会显示内存的使用情况，包括实体内存，虚拟的交换文件内存，共享内存区段，以及系统核心使用的缓冲区等。

## 格式

```
free [-bkmotV][-s <间隔秒数>]

```

## 参数

-b 　以Byte为单位显示内存使用情况。

-k 　以KB为单位显示内存使用情况。

-m 　以MB为单位显示内存使用情况。

-o 　不显示缓冲区调节列。

-s<间隔秒数> 　持续观察内存使用状况。

-t 　显示内存总和列。

-V 　显示版本信息

## 常见用法

free -m: 以 mb 为单位展示内存使用情况

free -mt: 以 mb 为单位展示总内存使用情况

free -ms: 以 mb 为单位每10s 展示一次内存使用情况

# lsof

## 功能

lsof(list open files)是一个列出当前系统打开文件的工具。

## 格式

lsof 查看端口占用语法格式：

```
lsof -i:端口号

```

## 参数

```
lsof -i:8080：查看8080端口占用
lsof abc.txt：显示开启文件abc.txt的进程
lsof -c abc：显示abc进程现在打开的文件
lsof -c -p 1234：列出进程号为1234的进程所打开的文件
lsof -g gid：显示归属gid的进程情况
lsof +d /usr/local/：显示目录下被进程开启的文件
lsof +D /usr/local/：同上，但是会搜索目录下的目录，时间较长
lsof -d 4：显示使用fd为4的进程
lsof -i -U：显示所有打开的端口和UNIX domain文件

```

## 常见用法

查看服务器 8000 端口的占用情况：

```
# lsof -i:8000
COMMAND   PID USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
nodejs  26993 root   10u  IPv4 37999514      0t0  TCP *:8000 (LISTEN)

```

可以看到 8000 端口已经被 nodejs 服务占用。

lsof -i 需要 root 用户的权限来执行

# netstat

## 功能

netstat -tunlp 用于显示 tcp，udp 的端口和进程等相关情况。

## 格式

```
netstat -tunlp | grep 端口号
```

## 参数

-t (tcp) 仅显示tcp相关选项

-u (udp)仅显示udp相关选项

-n 拒绝显示别名，能显示数字的全部转化为数字

-l 仅列出在Listen(监听)的服务状态

-p 显示建立相关链接的程序名

## 常见用法

查看 8000 端口的情况，使用以下命令

```bash
# netstat -tunlp | grep 8000
tcp        0      0 0.0.0.0:8000            0.0.0.0:*               LISTEN      26993/nodejs  
```

更多命令

```bash
netstat -ntlp   //查看当前所有tcp端口
netstat -ntulp | grep 80   //查看所有80端口使用情况
netstat -ntulp | grep 3306   //查看所有3306端口使用情况
```





