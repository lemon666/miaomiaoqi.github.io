Dubbo

## 启动检查服务

* dubbo消费者启动时会检查服务是否存在, 默认情况下如果不存在会报错, 可以关闭启动检查, 当服务调用时再去检查

        <dubbo:reference interface="com.miaoqi.gmall.service.UserService" id="userService" check="false"/>
    
        <!--配置消费者的统一规则, reference的check都是false了-->
        <dubbo:consumer check="false"></dubbo:consumer>

    配置文件版, check属性设置为false, 启动时就不会检查了

        @Reference(check = false)

    注解版, @Reference注解的check属性设置为false

## 超时配置&配置覆盖关系

* 由于网络或服务端不可靠，会导致调用出现一种不确定的中间状态（超时）。为了避免超时导致客户端资源（线程）挂起耗尽，必须设置超时时间。

    * Dubbo消费端

            全局超时配置
            <dubbo:consumer timeout="5000" />
            
            指定接口以及特定方法超时配置
            <dubbo:reference interface="com.foo.BarService" timeout="2000">
                <dubbo:method name="sayHello" timeout="3000" />
            </dubbo:reference>

    * Dubbo服务端

            全局超时配置
            <dubbo:provider timeout="5000" />
            
            指定接口以及特定方法超时配置
            <dubbo:provider interface="com.foo.BarService" timeout="2000">
                <dubbo:method name="sayHello" timeout="3000" />
            </dubbo:provider>

    * 配置原则

        1. 作服务的提供者，比服务使用方更清楚服务性能参数，如调用的超时时间，合理的重试次数，等等
        
        2. 在Provider配置后，Consumer不配置则会使用Provider的配置值，即Provider配置可以作为Consumer的缺省值。否则，Consumer会使用Consumer端的全局设置，这对于Provider不可控的，并且往往是不合理的

        配置的覆盖规则：
        
        1. **方法级优先于接口, 接口优先于全局**
        
        1. **消费者配置优先于提供者(前提是级别一样才是消费方优先)**

        ![http://www.miaomiaoqi.cn/images/dubbo/1.png](http://www.miaomiaoqi.cn/images/dubbo/1.png)


            
            
            
            
            
            
            
            
            
            
            
            
            
            
