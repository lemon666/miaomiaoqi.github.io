---
layout: post
title:  "Spring问题总结"
date:   2018-12-19 13:08:00
categories: Java
tags: Spring
author: miaoqi
---

* content
{:toc}
# Spring遇到的问题

## Spring同名bean覆盖

* spring对同一配置文件中相同id或者name的两个或以上的bean时，做直接抛异常的处理，而对不同配置文件中相同id或者名称的bean，只会在打印日志级别为info的信息，信息内容大概为**"Overriding bean definition for bean xxx : replacing xxx with beanDefinition ".**
	可能引发的问题：
	当不同文件中配置了相同id或者name的同一类型的两个bean时，如果这两个bean的类型虽然相同，但配置时又有差别时

	```
	<bean name="a" class="com.zyr.A">
	  <property name="age" value="20" />
	</bean>
	<bean name="a" class="com.zyr.A">
	  <property name="age" value="20" />
	</bean>
	```

	那么最终spring容器只会实例化后面的这个bean，后者将前者覆盖了。这种情况下，要排查问题很困难。

	**需要注意一点的是, 如果同名bean存在覆盖情况下, 是可以使用多@Primary的, 如果不同名的同类型bean使用多个@Primary就会报错, 不能用多个@Primary**

* 那么如何解决这个问题呢?靠程序员自律？绝对不定义重复名称的bean？我觉得这个是非常不靠谱的,因为项目依赖可能比较复杂,开发人员不尽相同.所以我认为只有通过在程序中引入一种报错机制才能解决这个问题。