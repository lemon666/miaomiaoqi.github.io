---
layout: post
title:  "AES算法"
date:   2018-12-18 17:57:48
categories: Algorithm
tags: 可逆算法
author: miaoqi
---

* content
{:toc} 
## 场景假设

* 假设有一个发送方在向接收方发送消息。如果没有任何加密算法，接收方发送的是一个明文消息：“我是小灰”

	![http://www.miaomiaoqi.cn/images/algorithm/aes/aes_1.png](http://www.miaomiaoqi.cn/images/algorithm/aes/aes_1.png)

	如果消息被中间人截获到，即使中间人无法篡改消息，也可以窥探到消息的内容，从而暴露了通信双方的私密。

	因此我们不再直接传送明文，而改用对称加密的方式传输密文，画风就变成了下面这样：

	![http://www.miaomiaoqi.cn/images/algorithm/aes/aes_2.png](http://www.miaomiaoqi.cn/images/algorithm/aes/aes_2.png)

* 具体工作的步骤如下：

	1. 发送方利用密钥123456，加密明文“我是小灰”，加密结果为TNYRvx+SNjZwEK+ZXFEcDw==。

	2. 发送方把加密后的内容TNYRvx+SNjZwEK+ZXFEcDw==传输给接收方。

	3. 接收方收到密文TNYRvx+SNjZwEK+ZXFEcDw==，利用密钥123456还原为明文“我是小灰”。

## AES算法

* AES算法全称Advanced Encryption Standard, 是DES算法的替代者, 也是当今最流行的对称加密算法之一
* 要想学习AES算法, 首先要清楚三个基本的概念: **密钥, 填充, 模式**

### 密钥

* 密钥是AES算法实现加密和解密的根本。对称加密算法之所以对称，是因为这类算法对明文的加密和解密需要使用**同一个密钥**。

* AES支持三种长度的密钥：

	**128位，192位，256位**

* 平时大家所说的AES128，AES192，AES256，实际上就是指的AES算法对不同长度密钥的使用。

* 从安全性来看, AES256安全性最高, 从性能来看, AES128性能最高, 本质原因是它们的加密处理轮数不同

### 填充

* 要想了解填充的概念，我们先要了解AES的**分组加密**特性。

	![http://www.miaomiaoqi.cn/images/algorithm/aes/aes_3.png](http://www.miaomiaoqi.cn/images/algorithm/aes/aes_3.png)

	AES算法在对明文加密的时候，并不是把整个明文一股脑加密成一整段密文，而是把明文拆分成一个个独立的明文块，每一个明文块长度128bit。

	这些明文块经过AES加密器的复杂处理，生成一个个独立的密文块，这些密文块拼接在一起，就是最终的AES加密结果。

	**但是这里涉及到一个问题：**

	假如一段明文长度是192bit，如果按每128bit一个明文块来拆分的话，第二个明文块只有64bit，不足128bit。这时候怎么办呢？就需要对明文块进行**填充**（Padding）。

	**AES在不同的语言实现中有许多不同的填充算法:**

	* **NoPadding**

		不做任何填充，但是要求明文必须是16字节的整数倍。

	* **PKCS5Padding（默认）**

		如果明文块少于16个字节（128bit），在明文块末尾补足相应数量的字符，且每个字节的值等于缺少的字符数。

		比如明文：{1,2,3,4,5,a,b,c,d,e},缺少6个字节，则补全为{1,2,3,4,5,a,b,c,d,e,6,6,6,6,6,6}

	* **ISO10126Padding**

		如果明文块少于16个字节（128bit），在明文块末尾补足相应数量的字节，最后一个字符值等于缺少的字符数，其他字符填充随机数。

		比如明文：{1,2,3,4,5,a,b,c,d,e},缺少6个字节，则可能补全为{1,2,3,4,5,a,b,c,d,e,5,c,3,G,$,6}