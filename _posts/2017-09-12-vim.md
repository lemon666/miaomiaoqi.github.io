---
layout: post
title:  "Vim编辑器"
date:   2017-09-12 13:51:33
categories: Editor
tags: Vim
author: miaoqi
---

* content
{:toc}               

## vim命令

* 命令模式
* 编辑模式(插入模式)
* 末行模式
    
* 命令切换到编辑:
    i I, a A, o O
    
* 命令:
    yy: 复制光标所在行    
    4yy: 复制光标所在行向下4行
    
    p: 粘贴
    
    dd: 剪切光标所在行     
    2dd: 剪切光标所在行向下2行    
    D: 从当前光标开始剪切, 一直到行末    
    d0: 从当前光标开始剪切, 一直到行首    
    x: 删除当前光标, 每次只删除一个    
    X: 删除当前光标前边的那个, 每次只删除一个   
    dw: 删除一个单词
    
    上:k 下:j 左:h 右:l
    
    定位到当前所看到页面的上, 中, 下       
    H, M, L
    
    ctrl + f:向下翻一页    
    ctrl + b:向上翻一页
    
    ctrl + d:向下翻半页   
    ctrl + u:向上翻半页
    
    20G: 快速定位到第20行    
    G: 快速回到整个代码的最后一行    
    gg: 快速回到整个代码的第一行
    
    w: 向后跳一个单词的长度, 即跳到下一个单词的开始处    
    b: 向前跳一个单词的长度
    
    u: 撤销刚刚的操作    
    ctrl + r: 反撤销    
    
    选中一片代码   
    v: 按照字母选    
    V: 按照行选     
    
    \>>: 向右移动代码    
    <<: 向左移动代码   
    .: 重复上一次的代码    
    r: 替换一个字符   
    R: 替换光标以及后边的字符
    
    /hello: 搜索hello   
    n: 查找下一个搜索到的东西   
    N: 查找上一个搜索到的东西
    
    :%s/hello/world/g: 全文将hello替换为world     
    :11,16s/hello/world/g: 将11到16行的hello替换为world
    
    :w: 保存    
    :q: 退出   
    :q!: 不保存就退出    
    :wq: 保存并且退出   
    shift + zz: 相当于 :wq   
        
## vim分屏操作

* 命令
    
    sp: 上下分屏,后可跟文件名 
        
    vsp: 左右分屏,后可跟文件名
        
    Ctr+w+w: 在多个窗口切换
        
    启动分屏:
        
    1.使用大写O参数进行垂直分屏    
    vim -On file1 file2 ...
        
    2.使用小写o参数进行水平分屏    
    vim -on file1 file2 ...
        
    注: n是数字，表示分屏的数量,n要大于等于文件个数
        
    关闭分屏:
        
    1.关闭当前窗口    
    ctrl+w c
        
    2.关闭当前窗口，如果只剩最后一个，则退出vim    
    ctrl+w q
        
    编辑中分屏
    1.上下分割当前打开的文件     
    ctrl+w s
        
    2.上下分割，并打开一个新的文件   
    :sp filename
        
    3.左右分割当前打开的文件    
    ctrl+w v
        
    4.左右分割，并打开一个新的文件   
    :vsp filename
        
    分屏编辑中光标的移动
        
    1.把光标移动到上边的屏    
    ctrl+w k
        
    2.把光标移动到下边的屏   
    ctrl+w j
        
    3.把光标移动到右边的屏   
    ctrl+w l
        
    4.把光标移动到左边的屏   
    ctrl+w h
        
    5.把光标移动到下一个的屏   
    ctrl+w w
        
    移动分屏
        
    1.向上移动   
    ctrl+w K
        
    2.向下移动    
    ctrl+w J
        
    3.向右移动   
    ctrl+w L
        
    4.向左移动     
    ctrl+w H
        
    屏幕尺寸
        
    1.增加高度    
    ctrl+w +
        
    2.减少高度    
    ctrl+w -
        
    3.让所有屏的高度一致    
    ctrl+w =
        
    4.左加宽度    
    ctrl+w >
        
    5.右加宽度    
    ctrl+w <
        
    6.右增加n宽 (如：n=30)    
    ctrl+w n <

## 打造Python编辑器

1. 首先确认编辑器是否安装成功

    * vim --version, 在这一步确保满足以下两个条件
    
        Vim编辑器版本应该大于8.0
    
        支持Python语言

2. 扩展管理器-Vundle

    * 该命令将下载Vundle插件管理器，并将它放置在你的Vim编辑器bundles文件夹中。现在，你可以通过.vimrc配置文件来管理所有扩展了.

            git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim

    * 将配置文件添加到你的用户的home文件夹中:

            touch ~/.vimrc

    * 接下来，把下来的Vundle配置添加到配置文件的顶部:

            set nocompatible              " required
            filetype off                  " required
            
            " set the runtime path to include Vundle and initialize
            set rtp+=~/.vim/bundle/Vundle.vim
            call vundle#begin()
            
            " alternatively, pass a path where Vundle should install plugins
            "call vundle#begin('~/some/path/here')
            
            " let Vundle manage Vundle, required
            Plugin 'gmarik/Vundle.vim'
            
            " Add all your plugins here (note older versions of Vundle used Bundle instead of Plugin)
            
            
            " All of your Plugins must be added before the following line
            call vundle#end()            " required
            filetype plugin indent on    " required
            
    * 这样，你就完成了使用Vundle前的设置。之后，你就可以在配置文件中添加希望安装的插件，然后打开Vim编辑器，运行下面的命令, 这个命令告诉Vundle施展它的魔法——自动下载所有的插件，并为你进行安装和更新。

            :PluginInstall

3. 配置.vmrc文件

    * 切换分割布局

            "split navigations
            nnoremap <C-J> <C-W><C-J>
            nnoremap <C-K> <C-W><C-K>
            nnoremap <C-L> <C-W><C-L>
            nnoremap <C-H> <C-W><C-H>

            等等，nnoremap是什么意思？——简单来说，nnoremap将一个组合快捷键映   射为另一个快捷键。no部分，指的是在Vim的正常模式（Normal Mode）下，而不是可视模式下重新映射。基本上，nnoremap<C-J> <C-W><C-j>就是说，当我在正常模式按下<C-J>时，进行<C-W><C-j>操作

    * 代码折叠

        大多数“现代”集成开发环境（IDE）都提供对方法（methods）或类（classes）进行折叠的手段，只显示类或方法的定义部分，而不是全部的代码。
            
        你可以在.vimrc中添加下面的代码开启该功能：

            " Enable folding
            set foldmethod=indent
            set foldlevel=99

        这样就可以实现，但是你必须手动输入za来折叠（和取消折叠）。使用空格键会是更好的选择。所以在你的配置文件中加上这一行命令吧：

            " Enable folding with the spacebar
            nnoremap <space> za

        第一个命令，set foldmethod=ident会根据每行的缩进开启折叠。但是这样做会出现超过你所希望的折叠数目。但是别怕，有几个扩展就是专门解决这个问题的。在这里，我们推荐SimplyFold。在.vimrc中加入下面这行代码，通过Vundle进行安装：

            Plugin 'tmhedberg/SimpylFold'

        **不要忘记执行安装命令：:PluginInstall**

        希望看到折叠代码的文档字符串?

            let g:SimpylFold_docstring_preview=1

    * Python代码缩进

        PEP8
    
        要支持PEP8风格的缩进，请在.vimrc文件中添加下面的代码：
        
            au BufNewFile,BufRead *.py
            \ set tabstop=4
            \ set softtabstop=4
            \ set shiftwidth=4
            \ set textwidth=79
            \ set expandtab
            \ set autoindent
            \ set fileformat=unix

        这些设置将让Vim中的Tab键就相当于4个标准的空格符，确保每行代码长度不超过80个字符，并且会以unix格式储存文件，避免在推送到Github或分享给其他用户时出现文件转换问题。

        另外，对于全栈开发，你可以设置针对每种文件类型设置au命令：

            au BufNewFile,BufRead *.js, *.html, *.css
            \ set tabstop=2
            \ set softtabstop=2
            \ set shiftwidth=2

    * 自动缩进

        自动缩进有用，但是在某些情况下（比如函数定义有多行的时候），并不总是会达到你想要的效果，尤其是在符合PEP8标准方面。我们可以利用indentpython.vim插件，来解决这个问题：

            Plugin 'vim-scripts/indentpython.vim'

    * 标示不必要的空白字符

        我们希望避免出现多余的空白字符。可以让Vim帮我们标示出来，使其很容易发现并删除。

            au BufRead,BufNewFile *.py,*.pyw,*.c,*.h match BadWhitespace /\s\+$/

    * 支持UTF-8编码

        大部分情况下，进行Python开发时你应该使用UTF-8编码，尤其是使用Python 3的时候。确保Vim设置文件中有下面的命令：

            set encoding=utf-8

    * 语法检查/高亮

        通过安装syntastic插件，每次保存文件时Vim都会检查代码的语法：

            Plugin 'scrooloose/syntastic'

        还可以通过这个小巧的插件，添加PEP8代码风格检查：

            Plugin 'nvie/vim-flake8'
        
        最后，让你的代码变得更漂亮：

            let python_highlight_all=1
            syntax on

    * 文件浏览

        如果你想要一个不错的文件树形结构，那么NERDTree是不二之选。

            Plugin 'scrooloose/nerdtree'
            
        如果你想用tab键，可以利用vim-nerdtree-tabs插件实现：
        
            Plugin 'jistr/vim-nerdtree-tabs'
            
        还想隐藏.pyc文件？那么再添加下面这行代码吧：
        
            let NERDTreeIgnore=['\.pyc$', '\~$'] "ignore files in NERDTree

    * 显示行号

        开启显示行号：

            set nu
    
    
        
        
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    